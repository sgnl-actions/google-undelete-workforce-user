name: google-undelete-workforce-user
description: Undelete a workforce user from Google Cloud IAM Workforce Identity

# Input parameters for web form generation
inputs:
  subjectId:
    type: text
    description: The subject ID of the workforce user to undelete
    required: true
    validation:
      min: 1
      max: 200

  workforcePoolId:
    type: text
    description: The ID of the workforce pool containing the user
    required: true
    validation:
      min: 1
      max: 100

  address:
    type: text
    description: Google IAM API base URL (defaults to https://iam.googleapis.com if not provided)
    required: false
    validation:
      min: 1
      max: 255

# Expected output structure
outputs:
  workforcePoolId:
    type: text
    description: The workforce pool ID that was processed

  subjectId:
    type: text
    description: The subject ID that was undeleted

  undeleted:
    type: boolean
    description: Whether the user was successfully undeleted

  alreadyActive:
    type: boolean
    description: Whether the user was already active (not deleted)

  undeletedAt:
    type: datetime
    description: When the undeletion completed (ISO 8601)

# Required secrets (configured at deployment time)
# The configured auth type will determine which secrets are available
secrets:
  - BEARER_AUTH_TOKEN  # For Bearer authentication
  - BASIC_USERNAME  # For Basic authentication
  - BASIC_PASSWORD  # For Basic authentication
  - OAUTH2_CLIENT_CREDENTIALS_CLIENT_SECRET  # For OAuth2 Client Credentials
  - OAUTH2_AUTHORIZATION_CODE_ACCESS_TOKEN  # For OAuth2 Authorization Code

# Runtime configuration
runtime:
  type: nodejs-22
  timeout: 30s
  memory: 128Mi
